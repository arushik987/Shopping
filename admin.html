<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaudhary Kirana Store - Admin Panel</title>
    <!-- Google Fonts: Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-red: #e74a3b;
            --text-color: #333;
            --muted-color: #777;
            --surface-color: #fff;
            --surface-dark-color: #f8f9fa;
            --border-color: #eee;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --card-border-radius: 18px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--surface-dark-color);
            color: var(--text-color);
            line-height: 1.6;
            padding-bottom: 80px; /* Space for bottom navigation */
        }

        /* Fixed Top Header */
        .admin-header {
            background-color: white;
            padding: 15px 20px;
            box-shadow: 0 2px 10px var(--shadow-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .admin-header .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary-red);
            font-size: 1.2rem;
                font-weight: 700;
        }

        .admin-header .logo span {
            color: var(--primary-red) !important;
        }

        .admin-header .logo i {
            font-size: 1.5rem;
            color: white;
        }

        .admin-header .admin-profile {
                display: flex;
                align-items: center;
            gap: 8px;
            color: var(--primary-red);
                font-size: 0.9rem;
            font-weight: 600;
        }

        /* Main Content */
        .admin-content {
            padding: 100px 15px 20px 15px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Section Styling */
        .admin-section {
            display: none;
            margin-bottom: 30px;
        }

        /* All sections - consistent spacing */
        .admin-section {
            padding-top: 90px;
        }

        .admin-section h2 {
            margin-bottom: 60px;
        }

        .admin-section .card {
            margin-top: 35px;
        }

        /* Products section specific */
        #products .card {
            margin-top: 25px;
        }

        /* Orders section specific */
        #orders .card {
            margin-top: 25px;
        }

        #orders .time-btn {
            padding: 8px 16px;
                border: 1px solid var(--border-color);
            background: white;
            color: var(--text-color);
            border-radius: 6px;
                cursor: pointer;
                transition: all 0.2s ease;
            font-size: 0.9rem;
            }

        #orders .time-btn.active {
            background: var(--primary-red);
                color: white;
            border-color: var(--primary-red);
        }

        #orders .time-btn:hover:not(.active) {
            background: var(--surface-color);
        }

        /* Slider section specific */
        #slider .card {
            margin-top: 25px;
        }

        /* Messages section specific */
        #messages .card {
            margin-top: 25px;
        }

        .admin-section.active {
            display: block;
        }

        .admin-section h2 {
            font-size: 1.8rem;
            margin-top: 30px;
            margin-bottom: 20px;
                text-align: center;
            color: var(--primary-red);
            font-weight: 700;
        }

        .admin-section h3 {
                font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--text-color);
            font-weight: 600;
        }

        /* Card Styling */
        .card {
            background-color: var(--surface-color);
            border-radius: var(--card-border-radius);
            box-shadow: 0 4px 15px var(--shadow-color);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        /* Stats Cards */
        #stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--surface-color);
            padding: 25px 20px;
            border-radius: var(--card-border-radius);
            text-align: center;
            border: 1px solid var(--border-color);
            box-shadow: 0 4px 15px var(--shadow-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .stat-card .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-red);
            margin-bottom: 10px;
        }

        .stat-card .stat-label {
            font-size: 1rem;
            color: var(--muted-color);
            font-weight: 500;
        }

        /* Button Styling */
            button, .btn {
                background: var(--primary-red);
                color: white;
                border: none;
                border-radius: 12px;
            padding: 12px 20px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            }

            button:hover, .btn:hover {
                background: #c0392b;
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(231, 74, 59, 0.4);
            }

            #add-product-btn, #add-slider-image-btn {
                background: var(--primary-red);
                color: white;
            padding: 14px 24px;
            font-size: 1rem;
                border-radius: 12px;
            margin: 10px 0;
            display: inline-block;
        }

        /* Time Period Buttons */
            .time-btn {
            background: var(--surface-dark-color);
            color: var(--muted-color);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 8px 16px;
                margin: 5px;
                font-size: 0.9rem;
                font-weight: 500;
            transition: all 0.3s ease;
                display: inline-block;
            }

            .time-btn.active {
                background: var(--primary-red);
                color: white;
                border-color: var(--primary-red);
        }

        /* Table Styling */
            .admin-section table {
                width: 100%;
            border-collapse: collapse;
            background: var(--surface-color);
            border-radius: var(--card-border-radius);
            overflow: hidden;
            box-shadow: 0 4px 15px var(--shadow-color);
        }

        .admin-section thead {
            background: var(--surface-dark-color);
        }

        .admin-section th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
        }

        .admin-section td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            vertical-align: middle;
        }

        .admin-section tbody tr:last-child td {
                border-bottom: none;
            }

        /* Action Buttons */
            .icon-btn {
            background: var(--surface-dark-color);
            border: 1px solid var(--border-color);
                border-radius: 8px;
                padding: 8px 12px;
                margin: 0 3px;
            color: var(--muted-color);
            transition: all 0.3s ease;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                min-width: 40px;
                min-height: 40px;
            }

            .icon-btn:hover {
            background: var(--border-color);
                transform: scale(1.05);
            }

            .edit-product-btn, .edit-slider-image-btn {
                background: #e3f2fd;
                color: #1976d2;
                border-color: #bbdefb;
            }

            .delete-product-btn, .delete-slider-image-btn {
                background: #ffebee;
                color: #d32f2f;
                border-color: #ffcdd2;
            }

            .view-order-btn {
                background: #e8f5e8;
                color: #388e3c;
                border-color: #c8e6c9;
            }

        /* Form Styling */
            form {
                display: flex;
                flex-direction: column;
                gap: 20px;
                margin: 20px 0;
            }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: var(--text-color);
        }

        input, textarea, select {
            padding: 12px 16px;
                font-size: 1rem;
            border: 2px solid var(--border-color);
                border-radius: 12px;
            background: var(--surface-dark-color);
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        input:focus, textarea:focus, select:focus {
                border-color: var(--primary-red);
                background: white;
                outline: none;
                box-shadow: 0 0 0 3px rgba(231, 74, 59, 0.1);
            }

        /* Modal Styling */
            .modal-content {
                background: white;
                border-radius: 20px;
            padding: 30px;
                margin: 20px;
                box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            border: 1px solid var(--border-color);
            max-height: 90vh;
            overflow-y: auto;
            }

        /* Image Styling */
            .admin-product-image, .admin-slider-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
                border-radius: 8px;
            border: 2px solid var(--border-color);
        }

        /* Status Badges */
            .order-status-select {
            padding: 8px 12px;
            border-radius: 20px;
            border: 2px solid var(--border-color);
            background: var(--surface-dark-color);
                font-size: 0.9rem;
                font-weight: 600;
            color: var(--text-color);
                transition: all 0.3s ease;
            }

            .order-status-select:focus {
                border-color: var(--primary-red);
                box-shadow: 0 0 0 3px rgba(231, 74, 59, 0.1);
            }

        /* Bottom Navigation */
        .admin-bottom-nav {
            background-color: var(--surface-color);
            box-shadow: 0 -2px 10px var(--shadow-color);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 15px 0;
            border-top: 1px solid var(--border-color);
        }

        .admin-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--muted-color);
                transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 8px;
            min-width: 60px;
        }

        .admin-nav-item:hover {
            color: var(--primary-red);
            background-color: var(--surface-dark-color);
        }

        .admin-nav-item.active {
            color: var(--primary-red);
            background-color: rgba(231, 74, 59, 0.1);
        }

        .admin-nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
        }

        .admin-nav-item span {
            font-size: 0.8rem;
            font-weight: 500;
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: 40px;
        }

        .loading i {
            font-size: 2rem;
            color: var(--primary-red);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Mobile Responsive Design */
        @media (max-width: 768px) {
            .admin-content {
                padding: 90px 10px 20px 10px;
            }

            .admin-header {
                padding: 12px 15px;
            }

            .admin-header .logo {
                font-size: 1rem;
            }

            .admin-header .admin-profile {
                font-size: 0.8rem;
            }

            .admin-section {
                padding-top: 55px;
            }

            .admin-section h2 {
                font-size: 1.5rem;
                margin-bottom: 40px;
            }

            .admin-section h3 {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }

            .admin-section .card {
                margin-top: 30px;
            }

            .card {
                padding: 15px;
                margin-bottom: 15px;
            }

            #stats-cards {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .stat-card {
                padding: 20px 15px;
            }

            .stat-card .stat-number {
                font-size: 2rem;
            }

            /* Mobile Table Layout */
            .admin-section table {
                display: block;
                overflow-x: auto;
            }

            .admin-section thead {
                display: none;
            }

            .admin-section tbody,
            .admin-section tr,
            .admin-section td {
                display: block;
            }

            .admin-section tr {
                margin-bottom: 15px;
                border: 1px solid var(--border-color);
                border-radius: 12px;
                padding: 15px;
                background: white;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

            .admin-section td {
                text-align: center;
                padding: 12px 0;
                border: none;
                border-bottom: 1px solid var(--border-color);
                position: relative;
                min-height: 50px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .admin-section td:last-child {
                border-bottom: none;
            }

            .admin-section td::before {
                content: attr(data-label);
                font-weight: 700;
                color: var(--primary-red);
                font-size: 0.8rem;
                margin-bottom: 8px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            /* Special handling for image and action columns */
            .admin-section td:first-child::before,
            .admin-section td:last-child::before {
                display: none;
            }

            .admin-section td:first-child {
                text-align: center;
                justify-content: center;
            }

            .admin-section td:last-child {
                text-align: center;
                justify-content: center;
            }

            /* Mobile Button Layout */
            button, .btn {
                width: 100%;
                max-width: 300px;
                margin: 8px auto;
                display: block;
            }

            .time-btn {
                margin: 5px;
                min-width: 80px;
                padding: 10px 16px;
                font-size: 0.9rem;
                font-weight: 600;
                border-radius: 20px;
                transition: all 0.3s ease;
            }

            .time-btn.active {
                background: var(--primary-red);
                color: white;
                transform: scale(1.05);
                box-shadow: 0 4px 15px rgba(231, 74, 59, 0.3);
            }

            /* Mobile Form Layout */
            form input, form textarea, form select {
                width: 100%;
                margin-bottom: 10px;
            }

            /* Mobile Modal Layout */
            .modal-content {
                width: 95%;
                margin: 20px auto;
                padding: 20px;
            }

            /* Mobile Navigation */
            .admin-bottom-nav {
                padding: 12px 0;
            }

            .admin-nav-item {
                min-width: 50px;
                padding: 6px 8px;
            }

            .admin-nav-item i {
                font-size: 1.1rem;
            }

            .admin-nav-item span {
                font-size: 0.7rem;
            }

            /* Better mobile touch targets */
            .icon-btn {
                min-width: 50px;
                min-height: 50px;
                margin: 5px;
                border-radius: 12px;
                font-size: 1rem;
                transition: all 0.3s ease;
            }

            .icon-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }

            .icon-btn:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            /* Mobile grocery button styling */
            #add-grocery-btn {
                width: 100%;
                max-width: 350px;
                margin: 15px auto;
                display: block;
                padding: 18px 20px;
                font-size: 1rem;
                border-radius: 16px;
                box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
            }

            /* Mobile status select styling */
            .order-status-select {
                min-height: 44px;
                font-size: 1rem;
                padding: 12px 16px;
                border-radius: 12px;
                border: 2px solid var(--border-color);
                background: var(--surface-dark-color);
                transition: all 0.3s ease;
                width: 100%;
                max-width: 200px;
                margin: 0 auto;
                display: block;
            }

            .order-status-select:focus {
                border-color: var(--primary-red);
                box-shadow: 0 0 0 3px rgba(231, 74, 59, 0.1);
                background: white;
            }

            /* Enhanced mobile experience */
            .admin-section {
                animation: slideInUp 0.5s ease-out;
            }

            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Better mobile shadows and borders */
            .card, .stat-card {
                border: 1px solid rgba(0,0,0,0.1);
                transition: all 0.3s ease;
            }

            .card:hover, .stat-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            }

            /* Mobile-optimized header */
                .admin-header {
                backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.95);
                border-bottom: 1px solid rgba(0, 0, 0, 0.1);
                }

            /* Mobile-optimized bottom navigation */
                .admin-bottom-nav {
                backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.95);
                border-top: 1px solid rgba(0,0,0,0.1);
            }

            #add-grocery-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 25px rgba(40, 167, 69, 0.5);
            }

            #add-grocery-btn:active {
                transform: translateY(-1px);
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            }
        }

        /* Extra Small Devices */
        @media (max-width: 480px) {
            .admin-content {
                padding: 85px 8px 20px 8px;
            }

            .admin-header {
                padding: 10px 12px;
            }

            .admin-header .logo {
                font-size: 0.9rem;
            }

            .admin-section h2 {
                font-size: 1.3rem;
            }

            .admin-section h3 {
                font-size: 1rem;
            }

            .card {
                padding: 12px;
            }

            .stat-card {
                padding: 15px 12px;
            }

            .stat-card .stat-number {
                font-size: 1.8rem;
            }

            button, .btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            .admin-section td {
                padding: 15px 0;
                min-height: 60px;
            }

            .admin-section td::before {
                font-size: 0.75rem;
            }
        }

        /* Hide sections by default */
        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        /* Blur overlay for login */
        .blur-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4);
            z-index: 2999;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            pointer-events: auto;
        }

        .blur-overlay ~ .admin-bottom-nav {
            z-index: 10000 !important;
        }
        /* Mobile-specific table improvements */
        @media (max-width: 768px) {
            .admin-content {
                padding: 15px 10px;
            }
            
            /* Removed specific order-table-container rules to match Products tab responsiveness */
            
            .order-status-select {
                font-size: 12px !important;
                padding: 4px 6px !important;
                min-width: 80px !important;
            }
            
            .view-order-btn,
            .delete-order-btn {
                padding: 4px !important;
                font-size: 14px !important;
            }

                        /* Orders section now matches Products tab responsiveness */
        }

        /* Order cards now use standard card styling for consistent responsiveness */
        
        @media (max-width: 480px) {
            .admin-section {
                padding-top: 40px;
            }

            .admin-section h2 {
                font-size: 1.3rem;
                margin-bottom: 30px;
            }

            /* Removed specific order-table-container rules for consistent responsiveness */
            
            .order-status-select {
                font-size: 11px !important;
                padding: 3px 4px !important;
            }

            .time-btn {
                padding: 5px 10px;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Fixed Top Header -->
    <header class="admin-header">
        <div class="logo">
            <i class="fas fa-store" style="color: var(--primary-red); font-size: 1.5rem; margin-right: 12px;"></i>
            <span style="font-weight: 700; font-size: 1.2rem; color: white;">Chaudhary Kirana Store</span>
        </div>
        <div class="admin-profile">
            <i class="fas fa-user-shield" style="color: var(--primary-red); font-size: 1.2rem;"></i>
            <span style="margin-left: 8px; font-weight: 600; color: var(--primary-red);">Admin Panel</span>
        </div>
    </header>

    <div id="admin-content-wrapper">
        <main class="admin-content" id="admin-content">

            <div class="container">
                <section id="dashboard" class="admin-section active">
                    <h2>Dashboard</h2>
                    <div id="loading-indicator" style="text-align: center; padding: 40px; display: none;">
                        <div style="display: flex; flex-direction: column; align-items: center; gap: 20px;">
                            <div style="position: relative; width: 60px; height: 60px;">
                                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 4px solid #f3f3f3; border-top: 4px solid var(--primary-red); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                            </div>
                            <p style="color: var(--muted-color); font-size: 1.1rem; margin: 0;">Loading dashboard...</p>
                            <div style="display: flex; gap: 8px;">
                                <div style="width: 8px; height: 8px; background: var(--primary-red); border-radius: 50%; animation: bounce 1.4s ease-in-out infinite both;"></div>
                                <div style="width: 8px; height: 8px; background: var(--primary-red); border-radius: 50%; animation: bounce 1.4s ease-in-out infinite both 0.2s;"></div>
                                <div style="width: 8px; height: 8px; background: var(--primary-red); border-radius: 50%; animation: bounce 1.4s ease-in-out infinite both 0.4s;"></div>
                            </div>
                        </div>
                    </div>
                    <div id="stats-cards" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 24px;">
                        <div class="card stat-card" data-redirect="#products" style="cursor: pointer; padding: 20px; text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-products">0</div>
                            <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Products</div>
                            <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: var(--primary-red); height: 100%; width: 30%; border-radius: 3px;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                                <span>0%</span>
                                <span>30%</span>
                            </div>
                        </div>
                        
                        <div class="card stat-card" data-redirect="#orders" style="cursor: pointer; padding: 20px; text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-orders">0</div>
                            <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Orders</div>
                            <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: #007bff; height: 100%; width: 70%; border-radius: 3px;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                                <span>0%</span>
                                <span>70%</span>
                            </div>
                        </div>

                        <div class="card stat-card" data-redirect="#messages" style="cursor: pointer; padding: 20px; text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-messages">0</div>
                            <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Messages</div>
                            <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: #17a2b8; height: 100%; width: 70%; border-radius: 3px;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                                <span>0%</span>
                                <span>70%</span>
                            </div>
                        </div>

                        <div class="card stat-card" style="cursor: pointer; padding: 20px; text-align: center;">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;">₹0</div>
                            <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Revenue</div>
                            <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: #ff69b4; height: 100%; width: 70%; border-radius: 3px;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                                <span>0%</span>
                                <span>70%</span>
                            </div>
                        </div>
                    </div>


                    <div style="text-align: center; margin-top: 20px;">
                        <div id="connection-status" style="margin-top: 10px; font-size: 0.9rem; color: var(--muted-color);">
                            <i class="fas fa-circle" style="color: #ccc;"></i> Connecting...
                        </div>
                    </div>
                </section>

                <section id="products" class="admin-section">
                    <h2>Products</h2>
                    


                    <!-- Products Management Section -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color);">Product List</h3>
                            <button id="add-product-btn" style="background-color: var(--primary-red); color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600;">
                                <i class="fas fa-plus" style="margin-right: 8px;"></i>Add Product
                            </button>
                        </div>
                        <div id="product-table-container">
                            <!-- Product table will be loaded here -->
                            <p style="text-align: center; color: var(--muted-color);">No products to display.</p>
                        </div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="addGroceryProducts()" id="add-grocery-btn" style="background-color: #28a745; color: white; padding: 15px 25px; border-radius: 12px; font-weight: 600; margin: 10px; border: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);">
                                <i class="fas fa-shopping-cart" style="margin-right: 10px; font-size: 1.2rem;"></i>
                                <span style="font-size: 1.1rem;">Add Grocery Products from Zepto</span>
                            </button>
                        </div>
                    </div>
                </section>

                <section id="orders" class="admin-section">
                    <h2>Orders</h2>
                    
                    <!-- Orders Management Section -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color);">Order List</h3>
                            <div style="display: flex; gap: 8px;">
                                <button class="time-btn" data-period="monthly">Monthly</button>
                                <button class="time-btn" data-period="weekly">Weekly</button>
                                <button class="time-btn active" data-period="daily">Daily</button>
                            </div>
                        </div>
                        <div id="order-table-container">
                            <!-- Order table will be loaded here -->
                            <p style="text-align: center; color: var(--muted-color);">No orders to display.</p>
                        </div>
                    </div>
                </section>

                <section id="today-orders" class="admin-section">
                    <h2>Today Orders</h2>
                    
                    <!-- Today Orders Section -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color);">Today's Order List</h3>
                            <div style="display: flex; gap: 8px;">
                                <span style="color: var(--muted-color); font-size: 0.9rem;">Orders placed today</span>
                            </div>
                        </div>
                        <div id="today-orders-container">
                            <!-- Today's orders will be loaded here -->
                            <p style="text-align: center; color: var(--muted-color);">No orders placed today.</p>
                        </div>
                    </div>
                </section>

                <section id="slider" class="admin-section">
                    <h2>Slider / Ad Management</h2>
                    
                    <!-- Slider Management Section -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color);">Slider Images</h3>
                            <button id="add-slider-image-btn" style="background-color: #007bff; color: white; padding: 12px 20px; border-radius: 8px; font-weight: 600;">
                                <i class="fas fa-plus-circle" style="margin-right: 8px;"></i>Add New Slider Image
                            </button>
                    </div>
                        <div id="slider-image-table-container">
                        <!-- Slider image table will be loaded here -->
                        <p style="text-align: center; color: var(--muted-color);">No slider images to display.</p>
                        </div>
                    </div>
                </section>

                <section id="messages" class="admin-section">
                    <h2>Customer Messages</h2>
                    
                    <!-- Messages Management Section -->
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="margin: 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color);">Message List</h3>
                            <div style="display: flex; gap: 8px;">
                                <span style="color: var(--muted-color); font-size: 0.9rem;">Customer inquiries and feedback</span>
                            </div>
                        </div>
                        <div id="messages-table-container">
                        <!-- Messages table will be loaded here -->
                        <p style="text-align: center; color: var(--muted-color);">No messages to display.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <div id="sidebar-backdrop" class="sidebar-backdrop"></div>

    <!-- Message View Modal -->
    <div id="message-view-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 3000;">
        <div class="card" style="width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; padding: 30px; position: relative;">
            <button style="position: absolute; top: 10px; right: 10px; background: var(--primary-red); color: white; border: none; font-size: 1.2rem; cursor: pointer; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 1001;" onclick="document.getElementById('message-view-modal').style.display = 'none';">
                <i class="fas fa-times"></i>
            </button>
            <h3 style="margin-bottom: 20px; color: var(--text-color); margin-top: 10px;">Customer Message</h3>
            <div id="message-modal-content">
                <!-- Message details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="admin-auth-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center; z-index: 3000;">
        <div class="card" style="width: 90%; max-width: 400px; padding: 30px; text-align: center;">
            <h3>Admin Login</h3>
            <form id="admin-auth-form">
                <input type="email" id="admin-email" placeholder="Email" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                <input type="password" id="admin-password" placeholder="Password" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid var(--border-color); border-radius: 8px;">
                <p id="admin-auth-error" style="color: var(--primary-red); margin-bottom: 15px; display: none;"></p>
                <button type="submit" id="admin-login-btn" style="background-color: var(--primary-red); color: white; width: 100%;"><i class="fas fa-sign-in-alt" style="margin-right: 5px;"></i>Login</button>
            </form>
        </div>
    </div>

    <!-- Product Add/Edit Modal -->
    <div id="product-manage-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 2000;">
        <div class="card" style="width: 90%; max-width: 600px; padding: 30px; position: relative;">
            <button style="position: absolute; top: 10px; right: 10px; background: var(--primary-red); color: white; border: none; font-size: 1.2rem; cursor: pointer; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 1001;" onclick="document.getElementById('product-manage-modal').style.display = 'none';">
                <i class="fas fa-times"></i>
            </button>
            <h3 style="margin-top: 10px;">Add/Edit Product</h3>
            <form id="product-manage-form">
                <input type="text" id="product-name" placeholder="Product Name" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                <input type="text" id="product-category" placeholder="Category" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                <input type="number" id="product-price" placeholder="Price" step="0.01" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                <input type="url" id="product-image-url" placeholder="Image URL" required style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid var(--border-color); border-radius: 8px;">
                <textarea id="product-description" placeholder="Description" rows="5" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid var(--border-color); border-radius: 8px;"></textarea>
                <button type="submit" style="background-color: var(--primary-red); color: white; width: 100%;"><i class="fas fa-save" style="margin-right: 5px;"></i>Save Product</button>
            </form>
        </div>
    </div>

    <!-- Add Slider Image Modal -->
    <div id="add-slider-image-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 2000;">
        <div class="card" style="width: 90%; max-width: 400px; padding: 30px; position: relative; text-align: center;">
            <button style="position: absolute; top: 10px; right: 10px; background: var(--primary-red); color: white; border: none; font-size: 1.2rem; cursor: pointer; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 1001;" onclick="document.getElementById('add-slider-image-modal').style.display = 'none';">
                <i class="fas fa-times"></i>
            </button>
            <h3 style="margin-top: 10px;">Add Slider Image</h3>
            <form id="add-slider-image-form">
                <input type="url" id="slider-image-url-input" placeholder="Image URL" required style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid var(--border-color); border-radius: 8px;">
                <button type="submit" style="background-color: var(--primary-red); color: white; width: 100%;"><i class="fas fa-plus-circle" style="margin-right: 5px;"></i>Add Image</button>
            </form>
        </div>
    </div>

    <!-- Order Details Full Screen Modal -->
    <div id="order-details-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 3000;">
        <div class="card" style="width: 95%; max-width: 800px; max-height: 90vh; overflow-y: auto; padding: 30px; position: relative;">
            <button class="icon-btn" style="position: absolute; top: 15px; right: 15px; font-size: 1.5rem; color: white; background: var(--primary-red); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;" onclick="document.getElementById('order-details-modal').style.display = 'none';">
                <i class="fas fa-times"></i>
            </button>
            
            <div id="order-details-content">
                <!-- Order details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Status Update Modal -->
    <div id="status-update-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 3000;">
        <div class="card" style="width: 90%; max-width: 400px; padding: 30px; position: relative; text-align: center;">
            <button class="icon-btn" style="position: absolute; top: 10px; right: 10px; font-size: 1.5rem; color: var(--text-color);" onclick="document.getElementById('status-update-modal').style.display = 'none';">
                <i class="fas fa-times"></i>
            </button>
            <h3 style="color: var(--primary-red); margin-bottom: 20px;">Update Order Status</h3>
            <div style="margin-bottom: 20px;">
                <label for="status-update-select" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-color);">Select New Status:</label>
                <select id="status-update-select" style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem;">
                    <option value="Pending">Pending</option>
                    <option value="Processing">Processing</option>
                    <option value="Shipped">Shipped</option>
                    <option value="Delivered">Delivered</option>
                    <option value="Cancelled">Cancelled</option>
                </select>
            </div>
            <button id="status-update-btn" style="background-color: var(--primary-red); color: white; padding: 12px 24px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.2s ease;">
                Update Status
            </button>
        </div>
    </div>


    <script type="module">
        // Firebase Configuration (Placeholder)
        const firebaseConfig = {
  apiKey: "AIzaSyBGh16sYlLk1e9nkhcLu7IPTZk807qeLZM",
  authDomain: "test-60bf6.firebaseapp.com",
  databaseURL: "https://test-60bf6-default-rtdb.firebaseio.com",
  projectId: "test-60bf6",
  storageBucket: "test-60bf6.firebasestorage.app",
  messagingSenderId: "208881094528",
  appId: "1:208881094528:web:114768e2de5956cae6fb65"
};


        // Initialize Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
        import { getDatabase, ref, push, set, onValue, remove, update, onDisconnect } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

        let app, auth, database;
        
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            database = getDatabase(app);
        } catch (error) {
            console.error('Firebase initialization failed:', error);
            showFallbackStats();
        }

        // Connection status indicator
        const connectionStatus = document.getElementById('connection-status');
        function updateConnectionStatus(connected) {
            if (connectionStatus) {
                if (connected) {
                    connectionStatus.innerHTML = '<i class="fas fa-circle" style="color: #28a745;"></i> Connected';
                } else {
                    connectionStatus.innerHTML = '<i class="fas fa-circle" style="color: #dc3545;"></i> Disconnected';
                }
            }
        }

        // --- Skeleton Loading Functions ---
        function showTableSkeleton(container, title, buttonText, rowCount = 5) {
            container.innerHTML = `
                <div class="skeleton-table">
                    <div class="skeleton-table-header">
                        <div class="skeleton skeleton-table-title"></div>
                        <div class="skeleton skeleton-table-button"></div>
                    </div>
                    ${Array(rowCount).fill(0).map(() => `
                        <div class="skeleton-table-row">
                            <div class="skeleton skeleton-table-image"></div>
                            <div class="skeleton skeleton-table-text"></div>
                            <div class="skeleton skeleton-table-text short"></div>
                            <div class="skeleton skeleton-table-text short"></div>
                            <div class="skeleton skeleton-table-actions"></div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function showStatsSkeleton() {
            const statsContainer = document.getElementById('stats-cards');
            const loadingIndicator = document.getElementById('loading-indicator');
            
            if (loadingIndicator) {
                loadingIndicator.style.display = 'block';
            }
            
            if (statsContainer) {
                statsContainer.innerHTML = `
                    <div class="skeleton-stats-card">
                        <div class="skeleton skeleton-stats-icon"></div>
                        <div class="skeleton skeleton-stats-number"></div>
                        <div class="skeleton skeleton-stats-label"></div>
                    </div>
                    <div class="skeleton-stats-card">
                        <div class="skeleton skeleton-stats-icon"></div>
                        <div class="skeleton skeleton-stats-number"></div>
                        <div class="skeleton skeleton-stats-label"></div>
                    </div>
                    <div class="skeleton-stats-card">
                        <div class="skeleton skeleton-stats-icon"></div>
                        <div class="skeleton skeleton-stats-number"></div>
                        <div class="skeleton skeleton-stats-label"></div>
                    </div>
                `;
            }
        }

        function hideLoadingIndicator() {
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
        }

        // --- Enhanced Image Loading for Admin ---
        function loadAdminImageWithFallback(imgElement, src, fallbackSrc = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRjBGMEYwIi8+CjxwYXRoIGQ9Ik0yNSAyNUgxNVYxNUgyNVYyNVoiIGZpbGw9IiNDQ0NDQ0MiLz4KPC9zdmc+') {
            return new Promise((resolve) => {
                const img = new Image();
                
                // Add loading class
                imgElement.classList.add('admin-image-loading');
                
                img.onload = () => {
                    imgElement.src = src;
                    imgElement.classList.remove('admin-image-loading');
                    imgElement.classList.add('admin-image-loaded');
                    resolve();
                };
                
                img.onerror = () => {
                    imgElement.src = fallbackSrc;
                    imgElement.classList.remove('admin-image-loading');
                    imgElement.classList.add('admin-image-loaded');
                    resolve(); // Still resolve to continue
                };
                
                img.src = src;
            });
        }

        const adminContent = document.getElementById('admin-content');
        const adminContentWrapper = document.getElementById('admin-content-wrapper');



        // --- Admin Authentication (Re-enabled) ---
        const adminAuthModal = document.getElementById('admin-auth-modal');
        const adminAuthForm = document.getElementById('admin-auth-form');
        const adminEmailInput = document.getElementById('admin-email');
        const adminPasswordInput = document.getElementById('admin-password');
        const adminAuthError = document.getElementById('admin-auth-error');
        const adminLoginBtn = document.getElementById('admin-login-btn'); // Get the login button

        function showAdminAuthError(message) {
            adminAuthError.textContent = message;
            adminAuthError.style.display = 'block';
        }

        function hideAdminAuthError() {
            adminAuthError.textContent = '';
            adminAuthError.style.display = 'none';
        }

        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, hide login modal and show admin content
                adminAuthModal.style.display = 'none';
                adminContent.style.display = 'block';
                adminContentWrapper.classList.remove('blur-overlay');

                // Trigger initial stats fetch if on dashboard
                if (window.location.hash === '#dashboard') {
                    fetchDashboardStats();
                }
            } else {
                // User is signed out, show login modal and hide admin content
                adminAuthModal.style.display = 'flex';
                adminContent.style.display = 'none';
                adminContentWrapper.classList.add('blur-overlay');
            }
        });

        adminAuthForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            hideAdminAuthError();

            const email = adminEmailInput.value;
            const password = adminPasswordInput.value;

            adminLoginBtn.disabled = true; // Disable button
            adminLoginBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 5px;"></i>Logging in...'; // Show loading indicator

            try {
                await signInWithEmailAndPassword(auth, email, password);
                // Login successful, onAuthStateChanged will handle UI update
            } catch (error) {
                showAdminAuthError(error.message);
            } finally {
                adminLoginBtn.disabled = false; // Re-enable button
                adminLoginBtn.innerHTML = '<i class="fas fa-sign-in-alt" style="margin-right: 5px;"></i>Login'; // Restore original text
            }
        });

        function handleAdminLogout() {
            signOut(auth).then(() => {
                // Sign-out successful, onAuthStateChanged will handle UI update
                window.location.hash = '#dashboard'; // Redirect to dashboard after logout
                document.body.classList.remove('sidebar-open-mobile'); // Ensure body overflow is reset
                sidebarBackdrop.classList.remove('active'); // Hide backdrop
            }).catch((error) => {
                console.error("Logout Error:", error);
                alert("Failed to log out.");
            });
        }


        // Time period button functionality
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('time-btn')) {
                // Remove active class from all buttons in the same group
                const buttonGroup = e.target.closest('div');
                buttonGroup.querySelectorAll('.time-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                // Add active class to clicked button
                e.target.classList.add('active');
                
                // Get the selected period and filter orders
                const selectedPeriod = e.target.getAttribute('data-period');
                filterOrdersByPeriod(selectedPeriod);
            }
        });

        // Filter orders by time period
        function filterOrdersByPeriod(period) {
            if (!database) return;
            
            const ordersRef = ref(database, 'orders');
            onValue(ordersRef, (snapshot) => {
                const orders = snapshot.val();
                if (orders) {
                    const filteredOrders = filterOrders(orders, period);
                    renderOrderTable(filteredOrders);
                }
            });
        }

        // Filter orders based on time period
        function filterOrders(orders, period) {
            const now = new Date();
            const filtered = {};
            
            Object.keys(orders).forEach(orderId => {
                const order = orders[orderId];
                const orderDate = new Date(order.timestamp || order.orderDate || now);
                
                let shouldInclude = false;
                
                switch (period) {
                    case 'daily':
                        const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                        shouldInclude = orderDate >= today;
                        break;
                    case 'weekly':
                        const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                        shouldInclude = orderDate >= weekAgo;
                        break;
                    case 'monthly':
                        const monthAgo = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());
                        shouldInclude = orderDate >= monthAgo;
                        break;
                    default:
                        shouldInclude = true;
                }
                
                if (shouldInclude) {
                    filtered[orderId] = order;
                }
            });
            
            return filtered;
        }

        // --- SPA Routing Logic ---
        const adminRoutes = {
            '#dashboard': 'dashboard',
            '#products': 'products',
            '#orders': 'orders',
            '#today-orders': 'today-orders',
            '#slider': 'slider',
            '#messages': 'messages',
            '#logout': 'logout' // Special case for logout
        };

        function showAdminSection(sectionId) {
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }

        function handleAdminHashChange() {
            const hash = window.location.hash || '#today-orders';
            const route = adminRoutes[hash];

            // Ensure bottom navigation is always visible
            const bottomNav = document.querySelector('.admin-bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'flex';
                bottomNav.style.zIndex = '9999';
            }

            // Update bottom navigation
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            if (route) {
                if (route === 'logout') {
                    handleAdminLogout();
                    return;
                }
                showAdminSection(route);
                const activeNavItem = document.querySelector(`.admin-nav-item[data-route="${route}"]`);
                if (activeNavItem) {
                    activeNavItem.classList.add('active');
                }
            } else {
                window.location.hash = '#today-orders';
            }
        }

        window.addEventListener('hashchange', handleAdminHashChange);
        window.addEventListener('load', handleAdminHashChange);



        // --- Dashboard Stats ---
        const totalProductsSpan = document.getElementById('total-products');
        const totalOrdersSpan = document.getElementById('total-orders');
        const totalMessagesSpan = document.getElementById('total-messages');

        function fetchDashboardStats() {
            // Show skeleton loading for stats
            showStatsSkeleton();
            
            // Check if database is available
            if (!database) {
                console.error('Database not available');
                showFallbackStats();
                return;
            }
            
            try {
                let dataLoaded = 0;
                const totalDataSources = 3;
                
                function checkAllDataLoaded() {
                    dataLoaded++;
                    if (dataLoaded >= totalDataSources) {
                        hideLoadingIndicator();
                        hideStatsSkeleton(); // Hide skeleton and show actual stats cards
                    }
                }
                
                // Total Products
                onValue(ref(database, 'products'), (snapshot) => {
                    const products = snapshot.val();
                    const productCount = products ? Object.keys(products).length : 0;
                    totalProductsSpan.textContent = productCount;
                    
                    // Also update the products display in the products section
                    const totalProductsDisplayElement = document.getElementById('total-products-display');
                    if (totalProductsDisplayElement) {
                        totalProductsDisplayElement.textContent = productCount;
                    }
                    
                    checkAllDataLoaded();
                }, (error) => {
                    console.error('Error loading products:', error);
                    totalProductsSpan.textContent = 'Error';
                    
                    const totalProductsDisplayElement = document.getElementById('total-products-display');
                    if (totalProductsDisplayElement) {
                        totalProductsDisplayElement.textContent = 'Error';
                    }
                    
                    checkAllDataLoaded();
                });

                // Total Orders (aggregate across all users)
                onValue(ref(database, 'orders'), (snapshot) => {
                    const allOrders = snapshot.val();
                    let orderCount = 0;
                    if (allOrders) {
                        for (const userId in allOrders) {
                            orderCount += Object.keys(allOrders[userId]).length;
                        }
                    }
                    totalOrdersSpan.textContent = orderCount;
                    checkAllDataLoaded();
                }, (error) => {
                    console.error('Error loading orders:', error);
                    totalOrdersSpan.textContent = 'Error';
                    checkAllDataLoaded();
                });

                // Total Messages
                onValue(ref(database, 'messages'), (snapshot) => {
                    const messages = snapshot.val();
                    totalMessagesSpan.textContent = messages ? Object.keys(messages).length : 0;
                    checkAllDataLoaded();
                }, (error) => {
                    console.error('Error loading messages:', error);
                    totalMessagesSpan.textContent = 'Error';
                    checkAllDataLoaded();
                });
            } catch (error) {
                console.error('Error in fetchDashboardStats:', error);
                // Show error state in stats
                totalProductsSpan.textContent = 'Error';
                totalOrdersSpan.textContent = 'Error';
                totalMessagesSpan.textContent = 'Error';
                hideLoadingIndicator();
            }
        }

        // Fallback function for when Firebase is not available
        function showFallbackStats() {
            if (totalProductsSpan) totalProductsSpan.textContent = '0';
            if (totalOrdersSpan) totalOrdersSpan.textContent = '0';
            if (totalMessagesSpan) totalMessagesSpan.textContent = '0';
            
            // Also update the products display in the products section
            const totalProductsDisplayElement = document.getElementById('total-products-display');
            if (totalProductsDisplayElement) {
                totalProductsDisplayElement.textContent = '0';
            }
            
            if (connectionStatus) {
                connectionStatus.innerHTML = '<i class="fas fa-circle" style="color: #ffc107;"></i> Offline Mode';
            }
            hideLoadingIndicator();
        }

        // Fetch stats when dashboard is active or on load if already on dashboard
        window.addEventListener('hashchange', () => {
            if (window.location.hash === '#dashboard') {
                fetchDashboardStats();
            } else if (window.location.hash === '#today-orders') {
                renderTodayOrders();
            }
        });

        // Initial load - show loading state and fetch stats if on dashboard
        window.addEventListener('load', () => {
            // Ensure bottom navigation is always visible
            const bottomNav = document.querySelector('.admin-bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'flex';
                bottomNav.style.zIndex = '9999';
            }

            // Show loading state initially
            if (window.location.hash === '#dashboard' || !window.location.hash) {
                showStatsSkeleton();
                // Small delay to ensure Firebase is initialized
                setTimeout(() => {
                    fetchDashboardStats();
                }, 100);
                
                // Fallback timeout - if Firebase doesn't respond within 5 seconds, show offline mode
                setTimeout(() => {
                    if (totalProductsSpan.textContent === '0' && 
                        totalOrdersSpan.textContent === '0' && 
                        totalMessagesSpan.textContent === '0') {
                        showFallbackStats();
                    }
                }, 5000);
                
                // Emergency timeout - force hide skeleton after 10 seconds to prevent it from getting stuck
                setTimeout(() => {
                    hideLoadingIndicator();
                    hideStatsSkeleton();
                }, 10000);
                } else if (window.location.hash === '#today-orders') {
                    // Load today's orders if starting on today-orders tab
                    setTimeout(() => {
                        renderTodayOrders();
                    }, 100);
            }
        });

        // Monitor Firebase connection status
        if (database) {
            const connectedRef = ref(database, '.info/connected');
            onValue(connectedRef, (snapshot) => {
                updateConnectionStatus(snapshot.val());
            });
        } else {
            updateConnectionStatus(false);
        }



        // --- Stat Card Click Handlers ---
        document.addEventListener('DOMContentLoaded', () => {
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('click', () => {
                    const redirectUrl = card.dataset.redirect;
                    if (redirectUrl) {
                        window.location.hash = redirectUrl;
                    }
                });
            });

            // --- Bottom Navigation Click Handlers ---
            const bottomNavItems = document.querySelectorAll('.admin-nav-item');
            bottomNavItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Remove active class from all items
                    bottomNavItems.forEach(navItem => navItem.classList.remove('active'));
                    
                    // Add active class to clicked item
                    item.classList.add('active');
                    
                    // Get the route from data attribute
                    const route = item.getAttribute('data-route');
                    if (route) {
                        window.location.hash = `#${route}`;
                    }
                });
            });
        });


        const forceShowStatsBtn = document.getElementById('force-show-stats-btn');

        // Force show stats button
        if (forceShowStatsBtn) {
            forceShowStatsBtn.addEventListener('click', () => {
                hideLoadingIndicator();
                hideStatsSkeleton();
            });
        }







        // --- Product Management (CRUD) ---
        const addProductBtn = document.getElementById('add-product-btn');
        const productManageModal = document.getElementById('product-manage-modal');
        const productManageForm = document.getElementById('product-manage-form');
        const productNameInput = document.getElementById('product-name');
        const productCategoryInput = document.getElementById('product-category');
        const productPriceInput = document.getElementById('product-price');
        const productImageUrlInput = document.getElementById('product-image-url');
        const productDescriptionTextarea = document.getElementById('product-description');

        let editingProductId = null; // To store the ID of the product being edited

        // Add grocery products from Zepto
        const groceryProducts = [
            // Fruits & Vegetables
            { name: "Fresh Apples", price: 120, imageUrl: "https://images.unsplash.com/photo-1560806887-1e4cd0b6cbd6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh and juicy apples, perfect for healthy snacking.", category: "Fruits & Vegetables" },
            { name: "Organic Bananas", price: 60, imageUrl: "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Organic bananas, rich in potassium and natural sweetness.", category: "Fruits & Vegetables" },
            { name: "Fresh Strawberries", price: 180, imageUrl: "https://images.unsplash.com/photo-1464965911861-746a04b4bca6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Sweet and juicy strawberries, perfect for desserts.", category: "Fruits & Vegetables" },
            { name: "Fresh Pomegranate", price: 140, imageUrl: "https://images.unsplash.com/photo-1541344999737-9c6c2c7e1a3b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh pomegranate seeds, rich in antioxidants.", category: "Fruits & Vegetables" },
            { name: "Fresh Beetroot", price: 80, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh beetroot, perfect for salads and juices.", category: "Fruits & Vegetables" },
            { name: "Fresh Ash Gourd", price: 45, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh ash gourd, great for cooking and health benefits.", category: "Fruits & Vegetables" },
            { name: "Fresh Bottle Gourd", price: 35, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh bottle gourd, excellent for weight loss.", category: "Fruits & Vegetables" },
            { name: "Fresh Lady Finger", price: 60, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh lady finger, perfect for curries and stir-fries.", category: "Fruits & Vegetables" },
            { name: "Fresh Potatoes", price: 40, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh potatoes, versatile for various dishes.", category: "Fruits & Vegetables" },
            { name: "Fresh Lemons", price: 50, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh lemons, great for cooking and beverages.", category: "Fruits & Vegetables" },
            { name: "Fresh Blueberries", price: 220, imageUrl: "https://images.unsplash.com/photo-1498557850523-fd3d118b962e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh blueberries, rich in antioxidants and vitamins.", category: "Fruits & Vegetables" },
            { name: "Fresh Papaya", price: 90, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh papaya, great for digestion and health.", category: "Fruits & Vegetables" },
            { name: "Fresh Dragon Fruit", price: 150, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh dragon fruit, exotic and nutritious.", category: "Fruits & Vegetables" },
            { name: "Fresh Mushroom", price: 120, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh mushrooms, perfect for cooking and health.", category: "Fruits & Vegetables" },
            { name: "Fresh Lettuce", price: 70, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh lettuce, perfect for salads and sandwiches.", category: "Fruits & Vegetables" },
            { name: "Fresh Avocado", price: 200, imageUrl: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh avocado, rich in healthy fats and nutrients.", category: "Fruits & Vegetables" },
            // Dairy & Bread
            { name: "Amul Butter", price: 55, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh Amul butter, perfect for cooking and spreading.", category: "Dairy & Bread" },
            { name: "Cheese Slices", price: 120, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh cheese slices, great for sandwiches and burgers.", category: "Dairy & Bread" },
            { name: "Fresh Milk", price: 65, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh milk, rich in calcium and nutrients.", category: "Dairy & Bread" },
            { name: "Fresh Curd", price: 45, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh curd, perfect for raita and lassi.", category: "Dairy & Bread" },
            { name: "Fresh Eggs", price: 80, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh eggs, rich in protein and nutrients.", category: "Dairy & Bread" },
            { name: "Fresh Bread", price: 35, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh bread, perfect for sandwiches and toast.", category: "Dairy & Bread" },
            // Grocery Essentials
            { name: "Aashirvaad Atta", price: 55, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Premium quality wheat flour for rotis and breads.", category: "Grocery Essentials" },
            { name: "Basmati Rice", price: 120, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Premium basmati rice, long grain and aromatic.", category: "Grocery Essentials" },
            { name: "Refined Oil", price: 140, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Pure refined oil for cooking and frying.", category: "Grocery Essentials" },
            { name: "Toor Dal", price: 85, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh toor dal, perfect for sambhar and dal.", category: "Grocery Essentials" },
            { name: "Masoor Dal", price: 75, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh masoor dal, great for soups and curries.", category: "Grocery Essentials" },
            // Snacks & Beverages
            { name: "Lays Chips", price: 20, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Crunchy Lays chips, perfect for snacking.", category: "Snacks & Beverages" },
            { name: "Kurkure", price: 10, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Spicy Kurkure, great for evening snacks.", category: "Snacks & Beverages" },
            { name: "Apple Juice", price: 45, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh apple juice, rich in vitamins.", category: "Snacks & Beverages" },
            { name: "Chocolate Box", price: 150, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Assorted chocolate box, perfect for gifting.", category: "Snacks & Beverages" },
            { name: "Cold Coffee", price: 80, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Refreshing cold coffee, perfect for summers.", category: "Snacks & Beverages" },
            // Spices & Masala
            { name: "Dalchini (Cinnamon)", price: 25, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh dalchini for aromatic cooking.", category: "Spices & Masala" },
            { name: "Fennel Seeds", price: 30, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh fennel seeds for mouth freshener.", category: "Spices & Masala" },
            { name: "Turmeric Powder", price: 40, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Pure turmeric powder for cooking.", category: "Spices & Masala" },
            { name: "Red Chili Powder", price: 35, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Spicy red chili powder for heat.", category: "Spices & Masala" },
            { name: "Garam Masala", price: 45, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Aromatic garam masala blend.", category: "Spices & Masala" },
            // Personal Care
            { name: "Toothpaste", price: 65, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Fresh mint toothpaste for oral hygiene.", category: "Personal Care" },
            { name: "Soap", price: 35, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Gentle soap for daily use.", category: "Personal Care" },
            { name: "Shampoo", price: 85, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Nourishing shampoo for healthy hair.", category: "Personal Care" },
            // Household Items
            { name: "Detergent Powder", price: 120, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Powerful detergent for clean clothes.", category: "Household Items" },
            { name: "Dish Soap", price: 55, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Effective dish soap for clean utensils.", category: "Household Items" },
            { name: "Toilet Paper", price: 75, imageUrl: "https://images.unsplash.com/photo-1548907040-4baa7e7d0b19?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80", description: "Soft toilet paper for comfort.", category: "Household Items" }
        ];

        // Function to add all grocery products to database
        async function addGroceryProducts() {
            try {
                const productsRef = ref(database, 'products');
                let addedCount = 0;
                
                for (const product of groceryProducts) {
                    const newProductRef = push(productsRef);
                    await set(newProductRef, product);
                    addedCount++;
                }
                
                alert(`Successfully added ${addedCount} grocery products!`);
                fetchDashboardStats(); // Refresh stats
                fetchProducts(); // Refresh product list
            } catch (error) {
                console.error("Error adding grocery products:", error);
                alert("Error adding grocery products. Please try again.");
            }
        }

        function renderProductTable(products) {
            const productTableContainer = document.getElementById('product-table-container');
            if (Object.keys(products).length === 0) {
                productTableContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No products to display.</p>';
                return;
            }

            let tableHtml = `
                <table style="width: 100%; border-collapse: collapse; text-align: left;">
                    <thead>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <th style="padding: 10px;">Image</th>
                            <th style="padding: 10px;">Name</th>
                            <th style="padding: 10px;">Category</th>
                            <th style="padding: 10px;">Price</th>
                            <th style="padding: 10px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (const productId in products) {
                const product = products[productId];
                tableHtml += `
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td data-label="Image:" style="padding: 10px;"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E" alt="${product.name}" class="admin-product-image" data-src="${product.imageUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRjBGMEYwIi8+CjxwYXRoIGQ9Ik0yNSAyNUgxNVYxNUgyNVYyNVoiIGZpbGw9IiNDQ0NDQ0MiLz4KPC9zdmc+'}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;"></td>
                        <td data-label="Name:" style="padding: 10px;">${product.name}</td>
                        <td data-label="Category:" style="padding: 10px;">${product.category}</td>
                        <td data-label="Price:" style="padding: 10px;">₹${product.price.toFixed(2)}</td>
                        <td data-label="Actions:" style="padding: 10px; text-align: center;">
                            <button class="icon-btn edit-product-btn" data-product-id="${productId}" style="color: #007bff;"><i class="fas fa-edit"></i></button>
                            <button class="icon-btn delete-product-btn" data-product-id="${productId}" style="color: var(--primary-red); margin-left: 5px;"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                `;
            }

            tableHtml += `
                    </tbody>
                </table>
            `;
            productTableContainer.innerHTML = tableHtml;

            // Load images with enhanced loading
            productTableContainer.querySelectorAll('.admin-product-image').forEach(img => {
                const imageSrc = img.getAttribute('data-src');
                if (imageSrc) {
                    loadAdminImageWithFallback(img, imageSrc);
                }
            });

                    // Add event listeners for edit and delete buttons
        productTableContainer.querySelectorAll('.edit-product-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                openEditProductModal(e.currentTarget.dataset.productId, products[e.currentTarget.dataset.productId]);
            });
        });

        productTableContainer.querySelectorAll('.delete-product-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                deleteProduct(e.currentTarget.dataset.productId);
            });
        });
        }

        addProductBtn.addEventListener('click', () => {
            editingProductId = null;
            productManageForm.reset();
            productManageModal.style.display = 'flex';
        });

        function openEditProductModal(productId, product) {
            editingProductId = productId;
            productNameInput.value = product.name;
            productCategoryInput.value = product.category;
            productPriceInput.value = product.price;
            productImageUrlInput.value = product.imageUrl;
            productDescriptionTextarea.value = product.description;
            productManageModal.style.display = 'flex';
        }

        productManageForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const productData = {
                name: productNameInput.value,
                category: productCategoryInput.value,
                price: parseFloat(productPriceInput.value),
                imageUrl: productImageUrlInput.value,
                description: productDescriptionTextarea.value,
            };

            const productsRef = ref(database, 'products');

            if (editingProductId) {
                // Update existing product
                const productRef = ref(database, `products/${editingProductId}`);
                await update(productRef, productData);
            } else {
                // Add new product
                const newProductRef = push(productsRef);
                await set(newProductRef, productData);
            }
            productManageModal.style.display = 'none';
            productManageForm.reset();
        });

        async function deleteProduct(productId) {
            if (confirm("Are you sure you want to delete this product?")) {
                const productRef = ref(database, `products/${productId}`);
                await remove(productRef);
            }
        }

        // Show skeleton loading initially for products
        const productTableContainer = document.getElementById('product-table-container');
        if (productTableContainer) {
            showTableSkeleton(productTableContainer, 'Products', 'Add Product', 6);
        }

        // Listen for product changes to re-render the table
        onValue(ref(database, 'products'), (snapshot) => {
            const products = snapshot.val() || {};
            renderProductTable(products);
        });

        // Refresh product table when navigating to the products section
        window.addEventListener('hashchange', () => {
            if (window.location.hash === '#products') {
                onValue(ref(database, 'products'), (snapshot) => {
                    const products = snapshot.val() || {};
                    renderProductTable(products);
                }, { onlyOnce: true });
            }
        });

        // --- Order Management ---
        const orderTableContainer = document.getElementById('order-table-container');

        function renderOrderProducts(items) {
            if (!items || !Array.isArray(items) || items.length === 0) {
                return '<span style="color: var(--muted-color); font-size: 0.85rem;">No items</span>';
            }
            
            let productsHtml = '';
            items.forEach((item, index) => {
                const imageUrl = item.imageUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMCAyNEMyMi4wOTExIDI0IDI0IDIyLjA5MTEgMjQgMjBDMjQgMTcuOTA4OSAyMi4wOTExIDE2IDIwIDE2QzE3LjkwODkgMTYgMTYgMTcuOTA4OSAxNiAyMEMxNiAyMi4wOTExIDE3LjkwODkgMjQgMjAgMjRaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCAyOEMyNC40MTgzIDI4IDI4IDI0LjQxODMgMjggMjBIMTJDMTIgMjQuNDE4MyAxNS41ODE3IDI4IDIwIDI4WiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K';
                const productName = item.name || 'Unknown Product';
                const quantity = item.qty || 1;
                
                productsHtml += `
                    <div style="display: flex; align-items: center; margin-bottom: ${index < items.length - 1 ? '10px' : '0'}; padding: 4px 0;">
                        <img src="${imageUrl}" alt="${productName}" style="width: 32px; height: 32px; border-radius: 6px; object-fit: cover; margin-right: 10px; flex-shrink: 0; border: 1px solid var(--border-color);">
                        <div style="flex: 1; min-width: 0;">
                            <div style="font-weight: 500; font-size: 0.9rem; color: var(--text-color); line-height: 1.2; margin-bottom: 2px; word-wrap: break-word; max-width: 130px;" title="${productName}">${productName}</div>
                            <div style="font-size: 0.8rem; color: var(--muted-color); font-weight: 500;">Qty: ${quantity}</div>
                        </div>
                    </div>
                `;
            });
            
            return productsHtml;
        }

        function getStatusColor(status) {
            switch(status) {
                case 'Pending': return '#ffc107';
                case 'Processing': return '#17a2b8';
                case 'Shipped': return '#007bff';
                case 'Delivered': return '#28a745';
                case 'Cancelled': return '#dc3545';
                default: return '#6c757d';
            }
        }

        function renderOrderTable(allOrders) {
            if (!allOrders || Object.keys(allOrders).length === 0) {
                orderTableContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No orders to display.</p>';
                return;
            }

            let tableHtml = `
                <div style="display: grid; gap: 15px; padding: 10px; margin-top: 10px;">
            `;

            const ordersArray = [];
            for (const userId in allOrders) {
                for (const orderId in allOrders[userId]) {
                    ordersArray.push({ userId, ...allOrders[userId][orderId] });
                }
            }

            // Sort orders by date (most recent first)
            ordersArray.sort((a, b) => b.date - a.date);

            ordersArray.forEach(order => {
                const orderDate = new Date(order.date).toLocaleDateString();
                const firstProduct = order.items && order.items.length > 0 ? order.items[0] : null;
                const productImage = firstProduct ? (firstProduct.imageUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMCAyNEMyMi4wOTExIDI0IDI0IDIyLjA5MTEgMjQgMjBDMjQgMTcuOTA4OSAyMi4wOTExIDE2IDIwIDE2QzE3LjkwODkgMTYgMTYgMTcuOTA4OSAxNiAyMEMxNiAyMi4wOTExIDE3LjkwODkgMjQgMjAgMjRaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCAyOEMyNC40MTgzIDI4IDI4IDI0LjQxODMgMjggMjBIMTJDMTIgMjQuNDE4MyAxNS41ODE3IDI4IDIwIDI4WiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K') : 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMCAyNEMyMi4wOTExIDI0IDI0IDIyLjA5MTEgMjQgMjBDMjQgMTcuOTA4OSAyMi4wOTExIDE2IDIwIDE2QzE3LjkwODkgMTYgMTYgMTcuOTA4OSAxNiAyMEMxNiAyMi4wOTExIDE3LjkwODkgMjQgMjAgMjRaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCAyOEMyNC40MTgzIDI4IDI4IDI0LjQxODMgMjggMjBIMTJDMTIgMjQuNDE4MyAxNS41ODE3IDI4IDIwIDI4WiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K';
                const productName = firstProduct ? firstProduct.name : 'No Product';
                const totalItems = order.items ? order.items.length : 0;
                
                tableHtml += `
                    <div class="order-card" data-order='${JSON.stringify(order)}' style="background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="flex-shrink: 0;">
                                <img src="${productImage}" alt="${productName}" style="width: 60px; height: 60px; border-radius: 8px; object-fit: cover; border: 1px solid var(--border-color);">
                            </div>
                            <div style="flex: 1; min-width: 0;">
                                <div style="font-weight: 600; font-size: 1rem; color: var(--text-color); margin-bottom: 4px;">${order.shippingName}</div>
                                <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 4px;">📱 ${order.shippingMobile || 'N/A'}</div>
                                <div style="font-size: 0.85rem; color: var(--muted-color); line-height: 1.3; margin-bottom: 6px;">📍 ${order.shippingAddress || 'N/A'}</div>
                                <div style="display: flex; align-items: center; gap: 10px; font-size: 0.8rem; color: var(--muted-color);">
                                    <span>📦 ${totalItems} item${totalItems !== 1 ? 's' : ''}</span>
                                    <span>💰 ₹${order.totalAmount.toFixed(2)}</span>
                                    <span>📅 ${orderDate}</span>
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 8px; align-items: center;">
                                <div class="order-status-badge status-${order.status.toLowerCase()}" style="padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; background: ${getStatusColor(order.status)}; color: white; min-width: 70px; text-align: center;">
                                    ${order.status}
                                </div>
                                <button class="update-status-btn" data-user-id="${order.userId}" data-order-id="${order.orderId}" style="background: var(--primary-red); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease;">
                                    <i class="fas fa-edit" style="font-size: 14px;"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });

            tableHtml += `
                </div>
            `;
            orderTableContainer.innerHTML = tableHtml;

            // Add event listeners for order cards (click to view details)
            orderTableContainer.querySelectorAll('.order-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    // Don't trigger if clicking on the update status button
                    if (e.target.closest('.update-status-btn')) {
                        return;
                    }
                    const orderData = JSON.parse(card.dataset.order);
                    showOrderDetailsModal(orderData);
                });
            });

            // Add event listeners for update status buttons
            orderTableContainer.querySelectorAll('.update-status-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent card click
                    const userId = button.dataset.userId;
                    const orderId = button.dataset.orderId;
                    showStatusUpdateModal(userId, orderId);
                });
            });
        }

        async function updateOrderStatus(userId, orderId, newStatus) {
            const orderRef = ref(database, `orders/${userId}/${orderId}`);
            await update(orderRef, { status: newStatus });
            console.log(`Order ${orderId} status updated to ${newStatus}`);
        }

        async function deleteOrder(userId, orderId) {
            if (confirm("Are you sure you want to delete this order permanently?")) {
                const orderRef = ref(database, `orders/${userId}/${orderId}`);
                await remove(orderRef);
                console.log(`Order ${orderId} deleted.`);
            }
        }

        // Function to render today's orders
        function renderTodayOrders() {
            const todayOrdersContainer = document.getElementById('today-orders-container');
            if (!todayOrdersContainer) return;

            // Get today's date (start of day)
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const todayTimestamp = today.getTime();

            // Check if database is available
            if (!database) {
                todayOrdersContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">Database not available.</p>';
                return;
            }

            // Show loading state
            todayOrdersContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">Loading today\'s orders...</p>';

            // Listen to orders data
            onValue(ref(database, 'orders'), (snapshot) => {
                const allOrders = snapshot.val();
                if (!allOrders || Object.keys(allOrders).length === 0) {
                    todayOrdersContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No orders placed today.</p>';
                    return;
                }

                const todayOrders = [];
                for (const userId in allOrders) {
                    for (const orderId in allOrders[userId]) {
                        const order = allOrders[userId][orderId];
                        const orderDate = new Date(order.date);
                        orderDate.setHours(0, 0, 0, 0);
                        
                        // Check if order was placed today
                        if (orderDate.getTime() === todayTimestamp) {
                            todayOrders.push({ userId, ...order });
                        }
                    }
                }

                if (todayOrders.length === 0) {
                    todayOrdersContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No orders placed today.</p>';
                    return;
                }

                // Sort orders by time (most recent first)
                todayOrders.sort((a, b) => b.date - a.date);

                let todayOrdersHtml = `
                    <div style="display: grid; gap: 15px; padding: 10px; margin-top: 10px;">
                `;

                todayOrders.forEach(order => {
                    const orderTime = new Date(order.date).toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        hour12: true 
                    });
                    const firstProduct = order.items && order.items.length > 0 ? order.items[0] : null;
                    const productImage = firstProduct ? (firstProduct.imageUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMCAyNEMyMi4wOTExIDI0IDI0IDIyLjA5MTEgMjQgMjBDMjQgMTcuOTA4OSAyMi4wOTExIDE2IDIwIDE2QzE3LjkwODkgMTYgMTYgMTcuOTA4OSAxNiAyMEMxNiAyMi4wOTExIDE3LjkwODkgMjQgMjAgMjRaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCAyOEMyNC40MTgzIDI4IDI4IDI0LjQxODMgMjggMjBIMTJDMTIgMjQuNDE4MyAxNS41ODE3IDI4IDIwIDI4WiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K') : 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMCAyNEMyMi4wOTExIDI0IDI0IDIyLjA5MTEgMjQgMjBDMjQgMTcuOTA4OSAyMi4wOTExIDE2IDIwIDE2QzE3LjkwODkgMTYgMTYgMTcuOTA4OSAxNiAyMEMxNiAyMi4wOTExIDE3LjkwODkgMjQgMjAgMjRaIiBmaWxsPSIjQ0NDIi8+CjxwYXRoIGQ9Ik0yMCAyOEMyNC40MTgzIDI4IDI4IDI0LjQxODMgMjggMjBIMTJDMTIgMjQuNDE4MyAxNS41ODE3IDI4IDIwIDI4WiIgZmlsbD0iI0NDQyIvPgo8L3N2Zz4K';
                    const productName = firstProduct ? firstProduct.name : 'No Product';
                    const totalItems = order.items ? order.items.length : 0;
                    
                    todayOrdersHtml += `
                        <div class="order-card" data-order='${JSON.stringify(order)}' style="background: var(--surface-color); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="flex-shrink: 0;">
                                    <img src="${productImage}" alt="${productName}" style="width: 60px; height: 60px; border-radius: 8px; object-fit: cover; border: 1px solid var(--border-color);">
                                </div>
                                <div style="flex: 1; min-width: 0;">
                                    <div style="font-weight: 600; font-size: 1rem; color: var(--text-color); margin-bottom: 4px;">${order.shippingName}</div>
                                    <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 4px;">📱 ${order.shippingMobile || 'N/A'}</div>
                                    <div style="font-size: 0.85rem; color: var(--muted-color); line-height: 1.3; margin-bottom: 6px;">📍 ${order.shippingAddress || 'N/A'}</div>
                                    <div style="display: flex; align-items: center; gap: 10px; font-size: 0.8rem; color: var(--muted-color);">
                                        <span>📦 ${totalItems} item${totalItems !== 1 ? 's' : ''}</span>
                                        <span>💰 ₹${order.totalAmount.toFixed(2)}</span>
                                        <span>🕐 ${orderTime}</span>
                                    </div>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 8px; align-items: center;">
                                    <div class="order-status-badge status-${order.status.toLowerCase()}" style="padding: 4px 8px; border-radius: 12px; font-size: 0.75rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; background: ${getStatusColor(order.status)}; color: white; min-width: 70px; text-align: center;">
                                        ${order.status}
                                    </div>
                                    <button class="update-status-btn" data-user-id="${order.userId}" data-order-id="${order.orderId}" style="background: var(--primary-red); color: white; border: none; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.2s ease;">
                                        <i class="fas fa-edit" style="font-size: 14px;"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });

                todayOrdersHtml += `
                    </div>
                `;
                todayOrdersContainer.innerHTML = todayOrdersHtml;

                // Add event listeners for today's order cards (click to view details)
                todayOrdersContainer.querySelectorAll('.order-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        // Don't trigger if clicking on the update status button
                        if (e.target.closest('.update-status-btn')) {
                            return;
                        }
                        const orderData = JSON.parse(card.dataset.order);
                        showOrderDetailsModal(orderData);
                    });
                });

                // Add event listeners for update status buttons
                todayOrdersContainer.querySelectorAll('.update-status-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent card click
                        const userId = button.dataset.userId;
                        const orderId = button.dataset.orderId;
                        showStatusUpdateModal(userId, orderId);
                    });
                });
            }, (error) => {
                console.error('Error loading today\'s orders:', error);
                todayOrdersContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">Error loading today\'s orders.</p>';
            });
        }

        // Listen for all orders changes to re-render the table
        onValue(ref(database, 'orders'), (snapshot) => {
            const allOrders = snapshot.val() || {};
            renderOrderTable(allOrders);
        });

        // Refresh order table when navigating to the orders section
        window.addEventListener('hashchange', () => {
            if (window.location.hash === '#orders') {
                onValue(ref(database, 'orders'), (snapshot) => {
                    const allOrders = snapshot.val() || {};
                    renderOrderTable(allOrders);
                    // Apply default daily filter
                    filterOrdersByPeriod('daily');
                }, { onlyOnce: true });
            }
        });

        // --- Slider / Ad Management ---
        const addSliderImageBtn = document.getElementById('add-slider-image-btn');
        const addSliderImageModal = document.getElementById('add-slider-image-modal');
        const addSliderImageForm = document.getElementById('add-slider-image-form');
        const sliderImageUrlInput = document.getElementById('slider-image-url-input');
        const sliderImageTableContainer = document.getElementById('slider-image-table-container');

        function renderSliderImageTable(sliderImages) {
            if (Object.keys(sliderImages).length === 0) {
                sliderImageTableContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No slider images to display.</p>';
                return;
            }

            let tableHtml = `
                <table style="width: 100%; border-collapse: collapse; text-align: left;">
                    <thead>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <th style="padding: 10px;">Preview</th>
                            <th style="padding: 10px;">URL</th>
                            <th style="padding: 10px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (const imageId in sliderImages) {
                const image = sliderImages[imageId];
                tableHtml += `
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td data-label="Preview:" style="padding: 10px;"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='60'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3C/svg%3E" alt="Slider Image" class="admin-slider-image" data-src="${image.downloadURL}" style="width: 100px; height: 60px; object-fit: cover; border-radius: 4px;"></td>
                        <td data-label="URL:" style="padding: 10px; word-break: break-all;">${image.downloadURL}</td>
                        <td data-label="Actions:" style="padding: 10px; text-align: center;">
                            <div style="display: flex; gap: 8px; justify-content: center; flex-wrap: wrap;">
                                <button class="icon-btn edit-slider-image-btn" data-image-id="${imageId}" data-image-url="${image.downloadURL}" style="color: #007bff; background: #f8f9fa; border: 1px solid #dee2e6; padding: 6px 10px; border-radius: 4px;">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="icon-btn delete-slider-image-btn" data-image-id="${imageId}" style="color: white; background: var(--primary-red); border: none; padding: 6px 10px; border-radius: 4px;">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }

            tableHtml += `
                    </tbody>
                </table>
            `;
            sliderImageTableContainer.innerHTML = tableHtml;

            // Load images with enhanced loading
            sliderImageTableContainer.querySelectorAll('.admin-slider-image').forEach(img => {
                const imageSrc = img.getAttribute('data-src');
                if (imageSrc) {
                    loadAdminImageWithFallback(img, imageSrc, 'https://via.placeholder.com/100x60');
                }
            });

            // Add event listeners for delete buttons
            const deleteButtons = sliderImageTableContainer.querySelectorAll('.delete-slider-image-btn');
            deleteButtons.forEach(button => {
                button.addEventListener('click', (e) => deleteSliderImage(e.currentTarget.dataset.imageId));
            });

            // Add event listeners for edit buttons
            const editButtons = sliderImageTableContainer.querySelectorAll('.edit-slider-image-btn');
            editButtons.forEach(button => {
                button.addEventListener('click', (e) => editSliderImage(e.currentTarget.dataset.imageId, e.currentTarget.dataset.imageUrl));
            });
        }

        addSliderImageBtn.addEventListener('click', () => {
            sliderImageUrlInput.value = '';
            addSliderImageModal.style.display = 'flex';
        });

        addSliderImageForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const imageUrl = sliderImageUrlInput.value;
            if (imageUrl) {
                const editingImageId = addSliderImageForm.dataset.editingImageId;
                
                if (editingImageId) {
                    // Update existing image
                    const imageRef = ref(database, `sliderImages/${editingImageId}`);
                    await update(imageRef, { downloadURL: imageUrl });
                    delete addSliderImageForm.dataset.editingImageId;
                } else {
                    // Add new image
                    const sliderRef = ref(database, 'sliderImages');
                    const newImageRef = push(sliderRef);
                    await set(newImageRef, { downloadURL: imageUrl });
                }
                
                addSliderImageModal.style.display = 'none';
                addSliderImageForm.reset();
                
                // Reset modal title and button text
                const modalTitle = addSliderImageModal.querySelector('h2');
                const submitBtn = addSliderImageForm.querySelector('button[type="submit"]');
                if (modalTitle) modalTitle.textContent = 'Add New Slider Image';
                if (submitBtn) submitBtn.innerHTML = '<i class="fas fa-plus" style="margin-right: 5px;"></i>Add Image';
            }
        });

        async function deleteSliderImage(imageId) {
            if (confirm("Are you sure you want to delete this slider image?")) {
                const imageRef = ref(database, `sliderImages/${imageId}`);
                await remove(imageRef);
            }
        }

        function editSliderImage(imageId, currentUrl) {
            sliderImageUrlInput.value = currentUrl;
            addSliderImageModal.style.display = 'flex';
            
            // Change modal title and button text for editing
            const modalTitle = addSliderImageModal.querySelector('h2');
            const submitBtn = addSliderImageForm.querySelector('button[type="submit"]');
            
            if (modalTitle) modalTitle.textContent = 'Edit Slider Image';
            if (submitBtn) submitBtn.innerHTML = '<i class="fas fa-save" style="margin-right: 5px;"></i>Update Image';
            
            // Store the editing image ID
            addSliderImageForm.dataset.editingImageId = imageId;
        }

        // Show skeleton loading initially for slider images
        if (sliderImageTableContainer) {
            showTableSkeleton(sliderImageTableContainer, 'Slider Images', 'Add Image', 4);
        }

        // Listen for slider image changes to re-render the table
        onValue(ref(database, 'sliderImages'), (snapshot) => {
            const sliderImages = snapshot.val() || {};
            renderSliderImageTable(sliderImages);
        });

        // Refresh slider image table when navigating to the slider section
        window.addEventListener('hashchange', () => {
            if (window.location.hash === '#slider') {
                onValue(ref(database, 'sliderImages'), (snapshot) => {
                    const sliderImages = snapshot.val() || {};
                    renderSliderImageTable(sliderImages);
                }, { onlyOnce: true });
            }
        });

        // --- Message Management ---
        const messagesTableContainer = document.getElementById('messages-table-container');

        function renderMessagesTable(messages) {
            if (Object.keys(messages).length === 0) {
                messagesTableContainer.innerHTML = '<p style="text-align: center; color: var(--muted-color);">No messages to display.</p>';
                return;
            }

            let tableHtml = `
                <table style="width: 100%; border-collapse: collapse; text-align: left;">
                    <thead>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <th style="padding: 10px;">Date</th>
                            <th style="padding: 10px;">Sender Name</th>
                            <th style="padding: 10px;">Email</th>
                            <th style="padding: 10px;">Message</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            // Sort messages by date (most recent first)
            const sortedMessages = Object.values(messages).sort((a, b) => b.date - a.date);

            sortedMessages.forEach((message, index) => {
                const messageDate = new Date(message.date).toLocaleDateString() + ' ' + new Date(message.date).toLocaleTimeString();
                const truncatedMessage = message.message.length > 50 ? message.message.substring(0, 50) + '...' : message.message;
                
                // Store message data in data attributes for safer handling
                const messageId = `msg_${index}_${Date.now()}`;
                
                tableHtml += `
                    <tr style="border-bottom: 1px solid var(--border-color);">
                        <td data-label="Date:" style="padding: 10px;">${messageDate}</td>
                        <td data-label="Sender Name:" style="padding: 10px;">${message.name}</td>
                        <td data-label="Email:" style="padding: 10px;">${message.email}</td>
                        <td data-label="Message:" style="padding: 10px; cursor: pointer; color: var(--primary-red); text-decoration: underline;" 
                            class="message-cell" 
                            data-message-id="${messageId}"
                            data-name="${message.name.replace(/"/g, '&quot;')}" 
                            data-email="${message.email.replace(/"/g, '&quot;')}" 
                            data-date="${messageDate}" 
                            data-message="${message.message.replace(/"/g, '&quot;')}">
                            ${truncatedMessage}
                        </td>
                    </tr>
                `;
            });

            tableHtml += `
                    </tbody>
                </table>
            `;
            messagesTableContainer.innerHTML = tableHtml;
            
            // Add click event listeners to message cells
            const messageCells = messagesTableContainer.querySelectorAll('.message-cell');
            messageCells.forEach(cell => {
                cell.addEventListener('click', function() {
                    const name = this.getAttribute('data-name');
                    const email = this.getAttribute('data-email');
                    const date = this.getAttribute('data-date');
                    const message = this.getAttribute('data-message');
                    showMessageModal(name, email, date, message);
                });
            });
        }

        // Function to show message modal
        function showMessageModal(name, email, date, message) {
            const modal = document.getElementById('message-view-modal');
            const modalContent = document.getElementById('message-modal-content');
            
            modalContent.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <div style="display: grid; gap: 15px; margin-bottom: 20px;">
                        <div>
                            <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">From:</strong>
                            <div style="font-size: 1.1rem; color: var(--text-color);">${name}</div>
                        </div>
                        <div>
                            <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Email:</strong>
                            <div style="color: var(--primary-red);">${email}</div>
                        </div>
                        <div>
                            <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Date:</strong>
                            <div style="color: var(--text-color);">${date}</div>
                        </div>
                    </div>
                    <div>
                        <strong style="color: var(--muted-color); display: block; margin-bottom: 10px;">Message:</strong>
                        <div style="background: var(--surface-dark-color); padding: 20px; border-radius: 8px; border-left: 4px solid var(--primary-red); line-height: 1.6; white-space: pre-wrap; word-wrap: break-word;">${message}</div>
                    </div>
                </div>
            `;
            
            modal.style.display = 'flex';
            
            // Close modal when clicking outside the content
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Listen for messages changes to re-render the table
        onValue(ref(database, 'messages'), (snapshot) => {
            const messages = snapshot.val() || {};
            renderMessagesTable(messages);
        });

        // Refresh messages table when navigating to the messages section
        window.addEventListener('hashchange', () => {
            if (window.location.hash === '#messages') {
                onValue(ref(database, 'messages'), (snapshot) => {
                    const messages = snapshot.val() || {};
                    renderMessagesTable(messages);
                }, { onlyOnce: true });
            }
        });

        function hideStatsSkeleton() {
            const statsContainer = document.getElementById('stats-cards');
            if (statsContainer) {
                // Restore the mobile app style stats cards structure
                statsContainer.innerHTML = `
                    <div class="card stat-card" data-redirect="#products" style="cursor: pointer; padding: 20px; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-products">0</div>
                        <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Products</div>
                        <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                            <div style="background: var(--primary-red); height: 100%; width: 30%; border-radius: 3px;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                            <span>0%</span>
                            <span>30%</span>
                        </div>
                    </div>
                    
                    <div class="card stat-card" data-redirect="#orders" style="cursor: pointer; padding: 20px; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-orders">0</div>
                        <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Orders</div>
                        <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                            <div style="background: #007bff; height: 100%; width: 70%; border-radius: 3px;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                            <span>0%</span>
                            <span>70%</span>
                        </div>
                    </div>

                    <div class="card stat-card" data-redirect="#messages" style="cursor: pointer; padding: 20px; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;" id="total-messages">0</div>
                        <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Total Messages</div>
                        <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                            <div style="background: #17a2b8; height: 100%; width: 70%; border-radius: 3px;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                            <span>0%</span>
                            <span>70%</span>
                        </div>
                    </div>

                    <div class="card stat-card" style="cursor: pointer; padding: 20px; text-align: center;">
                        <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-color); margin-bottom: 8px;">₹0</div>
                        <div style="font-size: 0.9rem; color: var(--muted-color); margin-bottom: 16px;">Revenue</div>
                        <div style="background: #f0f0f0; height: 6px; border-radius: 3px; overflow: hidden;">
                            <div style="background: #ff69b4; height: 100%; width: 70%; border-radius: 3px;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.8rem; color: var(--muted-color);">
                            <span>0%</span>
                            <span>70%</span>
                        </div>
                    </div>
                `;
                
                // Re-attach event listeners for stat cards
                const statCards = document.querySelectorAll('.stat-card');
                statCards.forEach(card => {
                    card.addEventListener('click', () => {
                        const redirectUrl = card.dataset.redirect;
                        if (redirectUrl) {
                            window.location.hash = redirectUrl;
                        }
                    });
                });
            }
        }

        // Function to show status update modal
        function showStatusUpdateModal(userId, orderId) {
            const modal = document.getElementById('status-update-modal');
            const statusSelect = document.getElementById('status-update-select');
            const updateBtn = document.getElementById('status-update-btn');
            
            // Set current order data
            updateBtn.dataset.userId = userId;
            updateBtn.dataset.orderId = orderId;
            
            // Show modal
            modal.style.display = 'flex';
        }

        // Function to show order details in full screen modal
        function showOrderDetailsModal(order) {
            const modal = document.getElementById('order-details-modal');
            const content = document.getElementById('order-details-content');
            
            const orderDate = new Date(order.date).toLocaleDateString() + ' ' + new Date(order.date).toLocaleTimeString();
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="color: var(--primary-red); margin-bottom: 10px;">Order Details</h2>
                    <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                        <div class="status-badge status-${order.status.toLowerCase()}" style="padding: 10px 20px; font-size: 1rem;">
                            ${order.status}
                        </div>
                        <div style="background: var(--surface-dark-color); padding: 10px 20px; border-radius: 8px;">
                            <strong>Order ID:</strong> ${order.orderId}
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                    <!-- Customer Information -->
                    <div class="card" style="margin: 0;">
                        <h3 style="color: var(--primary-red); margin-bottom: 20px; display: flex; align-items: center;">
                            <i class="fas fa-user" style="margin-right: 10px;"></i>Customer Information
                        </h3>
                        <div style="display: grid; gap: 15px;">
                            <div>
                                <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Name:</strong>
                                <span style="font-size: 1.1rem;">${order.shippingName}</span>
                            </div>
                            <div>
                                <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Contact & Address:</strong>
                                <div style="margin-bottom: 8px;">
                                    <span style="font-size: 1.1rem; font-family: monospace; color: var(--primary-red); font-weight: 600;">📱 ${order.shippingMobile || 'Not provided'}</span>
                                </div>
                                <div>
                                    <span style="font-size: 1rem; line-height: 1.4; color: var(--text-color);">📍 ${order.shippingAddress || 'Not provided'}</span>
                                </div>
                            </div>

                            <div>
                                <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Order Date:</strong>
                                <span style="font-size: 1.1rem;">${orderDate}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div class="card" style="margin: 0;">
                        <h3 style="color: var(--primary-red); margin-bottom: 20px; display: flex; align-items: center;">
                            <i class="fas fa-receipt" style="margin-right: 10px;"></i>Order Summary
                        </h3>
                        <div style="display: grid; gap: 15px;">
                            <div>
                                <strong style="color: var(--muted-color); display: block; margin-bottom: 5px;">Total Amount:</strong>
                                <span style="font-size: 1.5rem; font-weight: 700; color: var(--primary-red);">₹${order.totalAmount.toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Order Items -->
                <div class="card" style="margin-bottom: 30px;">
                    <h3 style="color: var(--primary-red); margin-bottom: 20px; display: flex; align-items: center;">
                        <i class="fas fa-shopping-cart" style="margin-right: 10px;"></i>Order Items
                    </h3>
                    <div style="display: grid; gap: 15px;">
                        ${order.items.map(item => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: var(--surface-dark-color); border-radius: 8px;">
                                <div style="display: flex; align-items: center; gap: 15px;">
                                    <img src="${item.imageUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRjBGMEYwIi8+CjxwYXRoIGQ9Ik0yNSAyNUgxNVYxNUgyNVYyNVoiIGZpbGw9IiNDQ0NDQ0MiLz4KPC9zdmc+'}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">
                                    <div>
                                        <div style="font-weight: 600; margin-bottom: 5px;">${item.name}</div>
                                        <div style="color: var(--muted-color); font-size: 0.9rem;">Quantity: ${item.qty}</div>
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: 600; color: var(--primary-red);">₹{(item.price * item.qty).toFixed(2)}</div>
                                    <div style="color: var(--muted-color); font-size: 0.9rem;">₹{item.price.toFixed(2)} each</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Order Progress -->
                <div class="card" style="margin-bottom: 30px;">
                    <h3 style="color: var(--primary-red); margin-bottom: 20px; display: flex; align-items: center;">
                        <i class="fas fa-chart-line" style="margin-right: 10px;"></i>Order Progress
                    </h3>
                    <div class="order-progress-bar" style="margin: 20px 0;">
                        <div class="order-progress-step ${getProgressStepClass(order.status, 'Pending')}" data-step="Pending">
                            <div class="progress-step-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <span class="progress-step-label">Pending</span>
                        </div>
                        <div class="order-progress-step ${getProgressStepClass(order.status, 'Processing')}" data-step="Processing">
                            <div class="progress-step-icon">
                                <i class="fas fa-cog"></i>
                            </div>
                            <span class="progress-step-label">Processing</span>
                        </div>
                        <div class="order-progress-step ${getProgressStepClass(order.status, 'Shipped')}" data-step="Shipped">
                            <div class="progress-step-icon">
                                <i class="fas fa-shipping-fast"></i>
                            </div>
                            <span class="progress-step-label">Shipped</span>
                        </div>
                        <div class="order-progress-step ${getProgressStepClass(order.status, 'Delivered')}" data-step="Delivered">
                            <div class="progress-step-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <span class="progress-step-label">Delivered</span>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <div style="font-size: 1.2rem; font-weight: 600; color: var(--primary-red);">
                            ${getOrderProgressPercentage(order.status)}% Complete
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <button onclick="updateOrderStatusFromModal('${order.userId}', '${order.orderId}', 'Processing')" style="background-color: #007bff; color: white; padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer;">
                        <i class="fas fa-cog" style="margin-right: 8px;"></i>Mark as Processing
                    </button>
                    <button onclick="updateOrderStatusFromModal('${order.userId}', '${order.orderId}', 'Shipped')" style="background-color: #28a745; color: white; padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer;">
                        <i class="fas fa-shipping-fast" style="margin-right: 8px;"></i>Mark as Shipped
                    </button>
                    <button onclick="updateOrderStatusFromModal('${order.userId}', '${order.orderId}', 'Delivered')" style="background-color: #17a2b8; color: white; padding: 12px 24px; border-radius: 8px; border: none; cursor: pointer;">
                        <i class="fas fa-check-circle" style="margin-right: 8px;"></i>Mark as Delivered
                    </button>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        // Helper function to update order status from modal
        function updateOrderStatusFromModal(userId, orderId, newStatus) {
            updateOrderStatus(userId, orderId, newStatus);
            // Close modal after status update
            document.getElementById('order-details-modal').style.display = 'none';
        }

        // Make function globally accessible for onclick handlers
        window.updateOrderStatusFromModal = updateOrderStatusFromModal;
        window.addGroceryProducts = addGroceryProducts;

        // --- Notification System ---
        // Notification system completely removed - no more notification functionality
    </script>

    <!-- Fixed Bottom Navigation -->
    <nav class="admin-bottom-nav">
        <a href="#today-orders" class="admin-nav-item active" data-route="today-orders">
            <i class="fas fa-calendar-day"></i>
            <span>Today</span>
        </a>
        <a href="#products" class="admin-nav-item" data-route="products">
            <i class="fas fa-boxes"></i>
            <span>Products</span>
        </a>
        <a href="#orders" class="admin-nav-item" data-route="orders">
            <i class="fas fa-receipt"></i>
            <span>Orders</span>
        </a>
        <a href="#slider" class="admin-nav-item" data-route="slider">
            <i class="fas fa-images"></i>
            <span>Slider</span>
        </a>
        <a href="#messages" class="admin-nav-item" data-route="messages">
            <i class="fas fa-envelope"></i>
            <span>Messages</span>
        </a>
    </nav>
</body>
</html>
